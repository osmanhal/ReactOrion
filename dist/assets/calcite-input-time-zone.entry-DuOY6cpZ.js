function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-981a9046-CEvu8e6x.js","assets/time-zones-e5c4749e-CGWvwbSX.js","assets/index-8db4316a-CN1DVSYo.js","assets/continent-aeaabeb8-DquOHSdg.js","assets/index-e1564c4b-BA8cGwFS.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{b as S,l as f,d,H as E,e as P,_ as u}from"./index-BfC8i6jT.js";import{c as w,d as F}from"./label-3e643a13-CEk50xTn.js";import{u as M,I as B}from"./interactive-7dc921d0-C6HJbVA3.js";import{c as V,d as R,f as k}from"./locale-4ce3c6b2-fiHvNr9A.js";import{u as z,c as A,d as U,s as N}from"./t9n-249fa143-CE2fk3Zh.js";import{c as H,s as W,a as $}from"./loadable-907717a5-DAXV1ZHU.js";import{c as G,d as j,a as q,H as K}from"./form-0d9970ac-DvR7-FOe.js";import"./dom-0dfcce02-D_EjFIg7.js";import"./guid-c5ea645c-C-axntQX.js";import"./component-3035aa13-CVleUxfT.js";import"./key-6b945008-DuBxtzvS.js";import"./observers-aea7721f-C3bX3_Ot.js";const J={offset:"offset"},Q=60,y=["CET","CST6CDT","EET","EST","EST5EDT","Factory","HST","MET","MST","MST7MDT","PST8PDT","UTC","WET"];function T(e){return e.replace(":15",".25").replace(":30",".5").replace(":45",".75").replace("âˆ’","-")}function X(e,t){const s=C(e,"en-US",t).replace("GMT","");return s===""?0:Number(T(s))*Q}function Y(){return new Date().getTimezoneOffset()*-1}function ee(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}async function te(e,t,s,n,r){if(s==="name"){const{groupByName:o}=await u(()=>import("./index-981a9046-CEvu8e6x.js"),__vite__mapDeps([0,1]));return(await o()).map(({label:a})=>({label:g(a),value:a,filterValue:a})).filter(a=>!!a).sort()}const c=r==="user"?e:r==="utc"?"fr":"en-GB",p=n.getTime();if(s==="region"){const[{groupByRegion:o},{getCountry:l}]=await Promise.all([u(()=>import("./index-8db4316a-CN1DVSYo.js"),__vite__mapDeps([2,1,3])),u(()=>import("./country-ea3c45b5-Dv6bFpj0.js"),__vite__mapDeps([]))]);return(await o()).map(({label:i,tzs:m})=>({label:i,items:m.map(h=>{const Z=T(C(h,c,p));return{label:L(h,t),value:h,filterValue:g(h),metadata:{offset:Z,country:l(h)}}})})).sort((i,m)=>i.label.localeCompare(m.label))}const[{groupByOffset:x},{DateEngine:D}]=await Promise.all([u(()=>import("./index-e1564c4b-BA8cGwFS.js"),__vite__mapDeps([4,1,3])),u(()=>import("./index-e80b50ff-BQePbIF-.js"),__vite__mapDeps([]))]),v=await x({dateEngine:new D,groupDateRange:1,startDate:new Date(p).toISOString()}),_=new Intl.ListFormat(e,{style:"long",type:"conjunction"});return v.forEach(o=>{const l=[];let a=0;o.tzs.forEach((i,m)=>{y.includes(i)&&a++,l[m]=a}),o.tzs=o.tzs.filter(i=>!y.includes(i)),o.labelTzIdx=o.labelTzIdx.map(i=>i-l[i]).filter(i=>i>=0&&i<o.tzs.length)}),v.map(({labelTzIdx:o,tzs:l})=>{const a=l[0],i=T(C(a,c,p)),m=X(a,p),h=o.map(b=>L(l[b],t));return{label:ie(t,i,_.format(h)),value:m,filterValue:l.map(b=>g(b))}}).filter(o=>!!o).sort((o,l)=>o.value-l.value)}function L(e,t){return t[e]||oe(e)}function se(e,t,s){return s.timeZoneRegionLabel.replace("{city}",e).replace("{country}",I(s,t))}function I(e,t){return e[t]||t}function oe(e){return e.split("/").pop()}function g(e){return e.replace(/_/g," ")}function ie(e,t,s){return e.timeZoneLabel.replace("{offset}",t).replace("{cities}",s)}function C(e,t,s=Date.now()){return k(t,{timeZone:e,timeZoneName:"shortOffset"}).formatToParts(s).find(({type:c})=>c==="timeZoneName").value}function ne(e){return e.items!==void 0}function ae(e){return ne(e[0])?e.flatMap(t=>t.items):e}function O(e,t,s){return s==null?null:ae(e).find(n=>n[t]==s)}const le=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}.offset{white-space:nowrap}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}",re=le,ce=class{constructor(e){S(this,e),this.calciteInputTimeZoneBeforeClose=f(this,"calciteInputTimeZoneBeforeClose",6),this.calciteInputTimeZoneBeforeOpen=f(this,"calciteInputTimeZoneBeforeOpen",6),this.calciteInputTimeZoneChange=f(this,"calciteInputTimeZoneChange",6),this.calciteInputTimeZoneClose=f(this,"calciteInputTimeZoneClose",6),this.calciteInputTimeZoneOpen=f(this,"calciteInputTimeZoneOpen",6),this.setComboboxRef=t=>{this.comboboxEl=t},this.onComboboxBeforeClose=t=>{t.stopPropagation(),this.overrideSelectedLabelForRegion(!1),this.calciteInputTimeZoneBeforeClose.emit()},this.onComboboxBeforeOpen=t=>{t.stopPropagation(),this.overrideSelectedLabelForRegion(!0),this.calciteInputTimeZoneBeforeOpen.emit()},this.onComboboxChange=t=>{t.stopPropagation();const n=t.target.selectedItems[0];if(!n){this.value=null,this.selectedTimeZoneItem=null,this.calciteInputTimeZoneChange.emit();return}const r=this.findTimeZoneItemByLabel(n.textLabel),c=`${r.value}`;this.value===c&&r.label===this.selectedTimeZoneItem.label||(this.value=c,this.selectedTimeZoneItem=r,this.calciteInputTimeZoneChange.emit())},this.onComboboxClose=t=>{t.stopPropagation(),this.open=!1,this.calciteInputTimeZoneClose.emit()},this.onComboboxOpen=t=>{this.open=!0,t.stopPropagation(),this.calciteInputTimeZoneOpen.emit()},this.clearable=!1,this.disabled=!1,this.form=void 0,this.maxItems=0,this.messages=void 0,this.messageOverrides=void 0,this.mode="offset",this.offsetStyle="user",this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.open=!1,this.overlayPositioning="absolute",this.referenceDate=void 0,this.required=!1,this.scale="m",this.status="idle",this.value=void 0,this.readOnly=!1,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}handleTimeZoneItemPropsChange(){this.updateTimeZoneItemsAndSelection()}handleValueChange(e,t){if(e=this.normalizeValue(e),!e&&this.clearable){this.value=e,this.selectedTimeZoneItem=null;return}const s=this.findTimeZoneItem(e);if(!s){this.value=t;return}this.selectedTimeZoneItem=s}async setFocus(){await H(this),await this.comboboxEl.setFocus()}effectiveLocaleWatcher(){z(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}overrideSelectedLabelForRegion(e){if(this.mode!=="region"||!this.selectedTimeZoneItem)return;const{label:t,metadata:s}=this.selectedTimeZoneItem;this.comboboxEl.selectedItems[0].textLabel=e?t:se(t,s.country,this.messages)}findTimeZoneItem(e){return O(this.timeZoneItems,"value",e)}findTimeZoneItemByLabel(e){return O(this.timeZoneItems,"label",e)}async updateTimeZoneItemsAndSelection(){if(this.timeZoneItems=await this.createTimeZoneItems(),this.value===""&&this.clearable){this.selectedTimeZoneItem=null;return}const e=this.mode==="offset"?Y():ee(),t=this.value??e;this.selectedTimeZoneItem=this.findTimeZoneItem(t)||this.findTimeZoneItem(e)}async createTimeZoneItems(){return!this.effectiveLocale||!this.messages?[]:te(this.effectiveLocale,this.messages,this.mode,this.referenceDate instanceof Date?this.referenceDate:new Date(this.referenceDate??Date.now()),this.offsetStyle)}connectedCallback(){G(this),w(this),V(this),A(this)}disconnectedCallback(){j(this),F(this),R(this),U(this)}normalizeValue(e){return e===null?"":e}async componentWillLoad(){W(this),await N(this),this.value=this.normalizeValue(this.value),await this.updateTimeZoneItemsAndSelection();const e=this.selectedTimeZoneItem?`${this.selectedTimeZoneItem.value}`:null;q(this,e),this.value=e}componentDidLoad(){$(this),this.overrideSelectedLabelForRegion(this.open)}componentDidRender(){M(this)}render(){return d(E,{key:"812212005676701893065226cd3594995779c332"},d(B,{key:"5c2ddca0fa6198a055ea78b3039a8239973cc4a4",disabled:this.disabled},d("calcite-combobox",{key:"ab33d3ebd756d1841870b516a7d174f8f3d20f13",clearDisabled:!this.clearable,disabled:this.disabled,label:this.messages.chooseTimeZone,lang:this.effectiveLocale,maxItems:this.maxItems,onCalciteComboboxBeforeClose:this.onComboboxBeforeClose,onCalciteComboboxBeforeOpen:this.onComboboxBeforeOpen,onCalciteComboboxChange:this.onComboboxChange,onCalciteComboboxClose:this.onComboboxClose,onCalciteComboboxOpen:this.onComboboxOpen,open:this.open,overlayPositioning:this.overlayPositioning,placeholder:this.mode==="name"?this.messages.namePlaceholder:this.mode==="offset"?this.messages.offsetPlaceholder:this.messages.regionPlaceholder,placeholderIcon:"search",readOnly:this.readOnly,ref:this.setComboboxRef,scale:this.scale,selectionMode:this.clearable?"single":"single-persist",status:this.status,"validation-icon":this.validationIcon,"validation-message":this.validationMessage},this.renderItems()),d(K,{key:"850e92f46d459fd7599183613151ab5d2b75ead6",component:this})))}renderItems(){return this.mode==="region"?this.renderRegionItems():this.timeZoneItems.map(e=>{const t=this.selectedTimeZoneItem===e,{label:s,value:n}=e;return d("calcite-combobox-item",{"data-value":n,key:s,selected:t,textLabel:s,value:`${e.filterValue}`})})}renderRegionItems(){return this.timeZoneItems.flatMap(({label:e,items:t})=>d("calcite-combobox-item-group",{key:e,label:I(this.messages,e)},t.map(s=>{const n=this.selectedTimeZoneItem===s,{label:r,value:c}=s;return d("calcite-combobox-item",{"data-value":c,description:I(this.messages,s.metadata.country),key:r,metadata:s.metadata,selected:n,textLabel:r,value:`${s.filterValue}`},d("span",{class:J.offset,slot:"content-end"},s.metadata.offset))})))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return P(this)}static get watchers(){return{messageOverrides:["onMessagesChange"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleWatcher"]}}};ce.style=re;export{ce as calcite_input_time_zone};

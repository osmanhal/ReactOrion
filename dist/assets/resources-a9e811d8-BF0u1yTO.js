import{g}from"./array-49c05b50-l3358aeC.js";import{d as p,h as b,t as S}from"./dom-0dfcce02-D_EjFIg7.js";import{d as v}from"./debounce-87018c17-B7rtlCgz.js";import{d as u,H as C}from"./index-BfC8i6jT.js";import{I as E}from"./interactive-7dc921d0-C6HJbVA3.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.12.1
 */const R={heading:"heading",container:"container",indented:"container--indented"},x={parentItem:"parent-item"};function H(){this.setUpItems(),this.setUpFilter(),this.deselectRemovedItems()}const F=["ArrowUp","ArrowDown"];function M(){this.setUpItems(),this.setUpFilter(),this.emitCalciteListChange=v(A.bind(this),0),this.emitCalciteListFilter=v(O.bind(this),0)}function q(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}function N(){var e;(e=this.mutationObserver)==null||e.disconnect()}function $(e){const{selectedValues:t}=this,{item:s,value:i,selected:n,shiftPressed:l}=e.detail;n?(this.multiple&&l&&this.selectSiblings(s),this.multiple||this.deselectSiblingItems(s),t.set(i,s)):(t.delete(i),this.multiple&&l&&this.selectSiblings(s,!0)),this.multiple||(h(s,n),n&&p(s)),this.lastSelectedItem=s,this.emitCalciteListChange()}function z(e){const t=e.detail.oldValue,s=this.selectedValues;if(s.has(t)){const i=s.get(t);s.delete(t),s.set(e.detail.newValue,i)}e.stopPropagation()}function L(e){return!!F.find(t=>t===e)}function K(e){const{el:t,items:s,multiple:i,selectedValues:n}=this;i||t.contains(e.relatedTarget)||m(s).forEach(c=>{h(c,n.size===0?c.contains(e.target)||e.target===c:c.selected)})}function _(e){const{key:t,target:s}=e;if(!L(t))return;const{items:i,multiple:n,selectionFollowsFocus:l}=this,{length:c}=i,a=i.indexOf(s);if(!c||a===-1)return;e.preventDefault();const o=V(this,s,t==="ArrowUp"?"up":"down"),r=i[o];i.forEach(d=>h(d,d===r)),!n&&l&&(r.selected=!0),p(r)}function V(e,t,s){const{items:i}=e,{length:n}=i,l=i.indexOf(t),c=s==="up"?-1:1;let a=1,o=g(l+c*a++,n);const r=o;for(;i[o].disabled&&(o=g(l+c*a++,n),o!==r););return o}function Y(e,t){const{items:s}=e;return s.indexOf(t)}function m(e){return e.filter(t=>!t.disabled)}function O(){this.calciteListFilter.emit()}function A(){this.calciteListChange.emit(this.selectedValues)}function j(e){if(e.defaultPrevented)return;const t=e.target,s=this.selectedValues;t.parentElement.tagName==="CALCITE-PICK-LIST-GROUP"&&t.slot===x.parentItem?(t.parentElement.remove(),Array.from(t.parentElement.children).forEach(i=>s.delete(i.value))):(t.remove(),s.delete(t.value)),this.emitCalciteListChange()}function h(e,t){e.disabled||(t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))}async function B(e){var c;if(this.filterEnabled&&e==="filter"){await p(this.filterEl);return}const{items:t,multiple:s,selectionFollowsFocus:i}=this;if(t.length===0)return;if(s)return(c=m(t)[0])==null?void 0:c.setFocus();const n=m(t),l=n.find(a=>a.selected)||n[0];return i&&l&&(l.selected=!0),l.setFocus()}function G(e){this.items=Array.from(this.el.querySelectorAll(e));let t=!1;const{items:s}=this;s.forEach(n=>{n.icon=this.getIconType(),this.multiple||(n.deselectDisabled=!0,h(n,!1)),n.selected&&(t=!0,h(n,!0),this.selectedValues.set(n.value,n))});const[i]=s;!t&&i&&!i.disabled&&h(i,!0)}function W(){const e=this.selectedValues,t=this.items.map(({value:s})=>s);e.forEach(s=>{t.includes(s.value)||this.selectedValues.delete(s.value)})}function J(e){this.items.forEach(t=>{t.value!==e.value&&(t.toggleSelected(!1),this.selectedValues.has(t.value)&&this.selectedValues.delete(t.value))})}function Q(e,t=!1){if(!this.lastSelectedItem)return;const{items:s}=this,i=s.findIndex(l=>l.value===this.lastSelectedItem.value),n=s.findIndex(l=>l.value===e.value);s.slice(Math.min(i,n),Math.max(i,n)).forEach(l=>{l.toggleSelected(!t),t?this.selectedValues.delete(l.value):this.selectedValues.set(l.value,l)})}let f;function X(e=!1){var c;const{filteredData:t,filterText:s}=this,i=t.map(a=>a.value);let n=!1;f||(f=new Set);const l=((c=this.items)==null?void 0:c.filter(a=>{const o=a.parentElement;o.matches("calcite-pick-list-group")&&f.add(o);const d=s?i.includes(a.value):!0;return a.hidden=!d,n||(n=d&&a.selected),d}))||[];f.forEach(a=>{const o=l.some(d=>a.contains(d));if(a.hidden=!o,!o)return;const r=b(a,"parent-item");r&&(r.hidden=!1,l.includes(r)&&Array.from(a.children).forEach(d=>d.hidden=!1))}),f.clear(),l.length>0&&!n&&!this.multiple&&h(l[0],!0),this.setFilteredItems(l),e&&this.emitCalciteListFilter()}function Z(){var t;const e=(t=this.filterEl)==null?void 0:t.filteredItems;e&&(this.filteredData=e),this.handleFilter()}function ee(e){e.stopPropagation();const{filteredItems:t,value:s}=e.currentTarget;this.filterText=s,this.filteredData=t,this.handleFilter(!0)}function te(){return this.items.map(e=>({label:e.label,description:e.description,metadata:e.metadata,value:e.value}))}const T={sticky:"sticky-pos"},se={circle:"circle",square:"square",grip:"grip"},w={menuActions:"menu-actions"},ie=({props:{disabled:e,loading:t,filterEnabled:s,dataForFilter:i,handleFilterEvent:n,filterPlaceholder:l,filterText:c,setFilterEl:a,dragEnabled:o,storeAssistiveEl:r},...d})=>{const I=u("slot",null);return u(C,{"aria-busy":S(t),role:"menu",...d},u(E,{disabled:e},u("section",null,o?u("span",{"aria-live":"assertive",class:"assistive-text",ref:r}):null,u("header",{class:{[T.sticky]:!0}},s?u("calcite-filter",{"aria-label":l,disabled:e,items:i,onCalciteFilterChange:n,placeholder:l,ref:a,value:c}):null,u("slot",{name:w.menuActions})),t?u("calcite-scrim",{loading:t}):null,I)))},ne={actions:"actions",actionsEnd:"actions--end",actionsStart:"actions--start",description:"description",handle:"handle",handleActivated:"handle--activated",highlight:"highlight",icon:"icon",iconDot:"icon-dot",label:"label",remove:"remove",title:"title",textContainer:"text-container"},le={checked:"check",remove:"x"},ae={actionsEnd:"actions-end",actionsStart:"actions-start"};export{ne as C,se as I,ie as L,ae as S,J as a,ee as b,V as c,W as d,q as e,Z as f,te as g,X as h,M as i,N as j,_ as k,K as l,H as m,$ as n,z as o,G as p,B as q,j as r,Q as s,Y as t,x as u,R as v,le as w};

import{b as l,l as s,d as i,e as c}from"./index-BfC8i6jT.js";import{h as o}from"./dom-0dfcce02-D_EjFIg7.js";import{c as d,d as r,u as h,I as b}from"./interactive-7dc921d0-C6HJbVA3.js";import{c as u,d as p,g as f}from"./label-3e643a13-CEk50xTn.js";import{s as g,a as E,c as m}from"./loadable-907717a5-DAXV1ZHU.js";import{c as y,d as C}from"./locale-4ce3c6b2-fiHvNr9A.js";import{c as k}from"./observers-aea7721f-C3bX3_Ot.js";import{c as v,s as w,d as I,u as B}from"./t9n-249fa143-CE2fk3Zh.js";import"./guid-c5ea645c-C-axntQX.js";import"./component-3035aa13-CVleUxfT.js";import"./key-6b945008-DuBxtzvS.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.12.1
 */const n={wrapper:"wrapper",confirmChangesButton:"confirm-changes-button",cancelEditingButton:"cancel-editing-button",inputWrapper:"input-wrapper",cancelEditingButtonWrapper:"cancel-editing-button-wrapper",enableEditingButton:"enable-editing-button",controlsWrapper:"controls-wrapper"},L=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) .controls-wrapper{block-size:1.5rem}:host([scale=m]) .controls-wrapper{block-size:2rem}:host([scale=l]) .controls-wrapper{block-size:2.75rem}:host(:not([editing-enabled]):not([disabled])) .wrapper:hover{background-color:var(--calcite-color-foreground-2)}.wrapper{box-sizing:border-box;display:flex;justify-content:space-between;background-color:var(--calcite-color-foreground-1);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.wrapper .input-wrapper{flex:1 1 0%}.controls-wrapper{display:flex}:host([disabled]) .cancel-editing-button-wrapper{border-color:var(--calcite-color-border-2)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}",S=L,H=class{constructor(e){l(this,e),this.calciteInlineEditableEditCancel=s(this,"calciteInlineEditableEditCancel",6),this.calciteInlineEditableEditConfirm=s(this,"calciteInlineEditableEditConfirm",6),this.calciteInternalInlineEditableEnableEditingChange=s(this,"calciteInternalInlineEditableEnableEditingChange",6),this.mutationObserver=k("mutation",()=>this.mutationObserverCallback()),this.enableEditing=()=>{var t,a;this.valuePriorToEditing=(t=this.inputElement)==null?void 0:t.value,this.editingEnabled=!0,(a=this.inputElement)==null||a.setFocus(),this.calciteInternalInlineEditableEnableEditingChange.emit()},this.disableEditing=()=>{this.editingEnabled=!1},this.cancelEditing=()=>{this.inputElement&&(this.inputElement.value=this.valuePriorToEditing),this.disableEditing(),this.enableEditingButton.setFocus(),!this.editingEnabled&&this.shouldEmitCancel&&this.calciteInlineEditableEditCancel.emit()},this.escapeKeyHandler=async t=>{var a;t.defaultPrevented||(t.key==="Escape"&&(t.preventDefault(),this.cancelEditing()),t.key==="Tab"&&this.shouldShowControls&&(!t.shiftKey&&t.target===this.inputElement&&(t.preventDefault(),this.cancelEditingButton.setFocus()),t.shiftKey&&t.target===this.cancelEditingButton&&(t.preventDefault(),(a=this.inputElement)==null||a.setFocus())))},this.cancelEditingHandler=async t=>{t.preventDefault(),this.cancelEditing()},this.enableEditingHandler=async t=>{this.disabled||t.target===this.cancelEditingButton||t.target===this.confirmEditingButton||(t.preventDefault(),this.editingEnabled||this.enableEditing())},this.confirmChangesHandler=async t=>{t.preventDefault(),this.calciteInlineEditableEditConfirm.emit();try{this.afterConfirm&&(this.loading=!0,await this.afterConfirm(),this.disableEditing(),this.enableEditingButton.setFocus())}catch{}finally{this.loading=!1}},this.disabled=!1,this.editingEnabled=!1,this.loading=!1,this.controls=!1,this.scale=void 0,this.afterConfirm=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0}disabledWatcher(e){this.inputElement&&(this.inputElement.disabled=e)}editingEnabledWatcher(e,t){this.inputElement&&(this.inputElement.editingEnabled=e),!e&&t&&(this.shouldEmitCancel=!0)}onMessagesChange(){}connectedCallback(){var e;d(this),u(this),y(this),v(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0}),this.mutationObserverCallback()}async componentWillLoad(){g(this),await w(this)}componentDidLoad(){E(this)}disconnectedCallback(){var e;r(this),p(this),C(this),I(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){h(this)}render(){return i(b,{key:"679bc60f370860de292d87bc9557f451f3674a4a",disabled:this.disabled},i("div",{key:"fa5d6c787837eeb8174dc45d7bcdc61b7e1c1851",class:n.wrapper,onClick:this.enableEditingHandler,onKeyDown:this.escapeKeyHandler},i("div",{key:"2a432c9940c1652490168333d15c19396d149a10",class:n.inputWrapper},i("slot",{key:"80a11e4a0c3ace9a4ef5578f797e4a6b4b3f72e9"})),i("div",{key:"540e6cf43d413ebe15345a37902b110094010d57",class:n.controlsWrapper},i("calcite-button",{key:"1ee7fa765b9bd7745424bb8f8f524c0a9ba6c44e",appearance:"transparent",class:n.enableEditingButton,disabled:this.disabled,iconStart:"pencil",kind:"neutral",label:this.messages.enableEditing,onClick:this.enableEditingHandler,ref:e=>this.enableEditingButton=e,scale:this.scale,style:{opacity:this.editingEnabled?"0":"1",width:this.editingEnabled?"0":"inherit"},type:"button"}),this.shouldShowControls&&[i("div",{key:"d9eb2bfc9affd4c7fb6510448476c5b83399a2ca",class:n.cancelEditingButtonWrapper},i("calcite-button",{key:"03243abe113f8e441e05f87feef164215082feda",appearance:"transparent",class:n.cancelEditingButton,disabled:this.disabled,iconStart:"x",kind:"neutral",label:this.messages.cancelEditing,onClick:this.cancelEditingHandler,ref:e=>this.cancelEditingButton=e,scale:this.scale,type:"button"})),i("calcite-button",{key:"92bdc973c915fbf4980a1fb01ffd4cf9a9f41557",appearance:"solid",class:n.confirmChangesButton,disabled:this.disabled,iconStart:"check",kind:"brand",label:this.messages.confirmChanges,loading:this.loading,onClick:this.confirmChangesHandler,ref:e=>this.confirmEditingButton=e,scale:this.scale,type:"button"})])))}blurHandler(){this.controls||this.disableEditing()}effectiveLocaleChange(){B(this,this.effectiveLocale)}async setFocus(){var e;await m(this),(e=this.el)==null||e.focus()}mutationObserverCallback(){var e;this.updateSlottedInput(),this.scale=this.scale||((e=this.inputElement)==null?void 0:e.scale)}onLabelClick(){this.setFocus()}updateSlottedInput(){const e=o(this.el,{matches:"calcite-input"});this.inputElement=e,e&&(this.inputElement.disabled=this.disabled,this.inputElement.label=this.inputElement.label||f(this))}get shouldShowControls(){return this.editingEnabled&&this.controls}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return c(this)}static get watchers(){return{disabled:["disabledWatcher"],editingEnabled:["editingEnabledWatcher"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}};H.style=S;export{H as calcite_inline_editable};
